var seniorityLevel = 0; var localhost = false; var ArrayList = javascript.util.ArrayList; var mySkillsSaved = new ArrayList; $(document).ready(function () { $('[data-toggle="tooltip"]').tooltip(); loadProfessions() }); var update_skillsCounter = function () { var e = $("#lg0 a").length; var t = $("#lg0 a.active").length; $("#associate_header").html("Associate Skills " + t + "/" + e); var a = $("#lg1 a").length; var l = $("#lg1 a.active").length; $("#core_header").html("Core Skills " + l + "/" + a); var i = $("#lg2 a").length; var r = $("#lg2 a.active").length; $("#senior_header").html("Senior Skills " + r + "/" + i); var s = $("#lg3 a").length; var o = $("#lg3 a.active").length; $("#principle_header").html("Principal Skills " + o + "/" + s) }; var table_contains = function (e) { var t; var a = $("#myTable tr td").filter(function () { if ($(this).text() == e) { t = true } }); if (t == undefined) t = false; return t }; var table_count = function (e) { var t = $("#" + e + " tr").length; return t }; var setAssociate = function () { seniorityLevel = 0; $("#btnSeniority").html("Associate"); clearSkillsToLearn(); setTimeout(populateSkillsToLearn, 100); $("#col1").addClass("disabledbutton"); $("#col2").addClass("disabledbutton"); $("#col3").addClass("disabledbutton") }; var setCore = function () { seniorityLevel = 1; $("#btnSeniority").html("Core"); clearSkillsToLearn(); setTimeout(populateSkillsToLearn, 100); $("#col1").removeClass("disabledbutton"); $("#col2").addClass("disabledbutton"); $("#col3").addClass("disabledbutton") }; var setSenior = function () { seniorityLevel = 2; $("#btnSeniority").html("Senior"); clearSkillsToLearn(); setTimeout(populateSkillsToLearn, 100); $("#col2").removeClass("disabledbutton"); $("#col1").removeClass("disabledbutton"); $("#col3").addClass("disabledbutton") }; var setPrinciple = function () { seniorityLevel = 3; $("#btnSeniority").html("Principal"); clearSkillsToLearn(); setTimeout(populateSkillsToLearn, 100); $("#col3").removeClass("disabledbutton"); $("#col2").removeClass("disabledbutton"); $("#col1").removeClass("disabledbutton") }; var clearSkillsToLearn = function () { $("#requiredTable tbody tr").remove() }; var clearMySkills = function () { $("#myTable tbody tr").remove() }; var populateSkillsToLearn = function () { $("#lg0 > a").each(function () { var e = $(this).attr("id"); var t = "<tr id=req_" + e + "><td>" + e + "</td><td>" + $(this).html() + "</td>"; $("#requiredTable").append(t) }); $("#lg0 > a.active").each(function () { var e = $(this).attr("id"); var t = "#req_" + e; $(t).remove() }); if (seniorityLevel > 0) { $("#lg1 > a").each(function () { var e = $(this).attr("id"); var t = "<tr id=req_" + e + "><td>" + e + "</td><td>" + $(this).html() + "</td>"; $("#requiredTable").append(t) }); $("#lg1 > a.active").each(function () { var e = $(this).attr("id"); var t = "#req_" + e; $(t).remove() }) } if (seniorityLevel > 1) { $("#lg2 > a").each(function () { var e = $(this).attr("id"); var t = "<tr id=req_" + e + "><td>" + e + "</td><td>" + $(this).html() + "</td>"; $("#requiredTable").append(t) }); $("#lg2 > a.active").each(function () { var e = $(this).attr("id"); var t = "#req_" + e; $(t).remove() }) } if (seniorityLevel > 2) { $("#lg3 > a").each(function () { var e = $(this).attr("id"); var t = "<tr id=req_" + e + "><td>" + e + "</td><td>" + $(this).html() + "</td>"; $("#requiredTable").append(t) }); $("#lg3 > a.active").each(function () { var e = $(this).attr("id"); var t = "#req_" + e; $(t).remove() }) } }; function clearSkills() { $("#lg0 a.active").removeClass("active"); $("#lg1 a.active").removeClass("active"); $("#lg2 a.active").removeClass("active"); $("#lg3 a.active").removeClass("active") } function clearSkillsAll() { $("#lg0 a").remove(); $("#lg1 a").remove(); $("#lg2 a").remove(); $("#lg3 a").remove() } function resetAll() { remove_localStorageKey(); clearSkillsToLearn(); clearMySkills(); setAssociate(); clearSkills(); setTimeout(update_skillsCounter, 300) } function remove_localStorageKey() { window.localStorage.removeItem("mySkills"); mySkillsSaved = new ArrayList } function setProf(e, t) { $("#btnProfession").html(t); clearSkillsAll(); if (localhost) { var a = "https://localhost:44381/api/skills/byAttribute?ProfessionID=" + e + "&Level=0"; var l = "https://localhost:44381/api/skills/byAttribute?ProfessionID=" + e + "&Level=1"; var i = "https://localhost:44381/api/skills/byAttribute?ProfessionID=" + e + "&Level=2"; var r = "https://localhost:44381/api/skills/byAttribute?ProfessionID=" + e + "&Level=3" } else { var a = "https://careerframeworkapi.azurewebsites.net/api/skills/byAttribute?ProfessionID=" + e + "&Level=0"; var l = "https://careerframeworkapi.azurewebsites.net/api/skills/byAttribute?ProfessionID=" + e + "&Level=1"; var i = "https://careerframeworkapi.azurewebsites.net/api/skills/byAttribute?ProfessionID=" + e + "&Level=2"; var r = "https://careerframeworkapi.azurewebsites.net/api/skills/byAttribute?ProfessionID=" + e + "&Level=3" } var s = false; $.getJSON(a, function (e, t) { if (t == "success") { $(e).each(function (e, t) { var a = $.trim(t.skillText); $("#lg0").append('<a href="#" class="list-group-item list-group-item-action" id=' + t.skillCode + ">" + a + "</a>") }) } else { s("Database Connection Error"); s = true } }); if (!s) { $.getJSON(l, function (e, t) { if (t == "success") { $(e).each(function (e, t) { var a = $.trim(t.skillText); $("#lg1").append('<a href="#" class="list-group-item list-group-item-action" id=' + t.skillCode + ">" + a + "</a>") }) } }); $.getJSON(i, function (e, t) { if (t == "success") { $(e).each(function (e, t) { var a = $.trim(t.skillText); $("#lg2").append('<a href="#" class="list-group-item list-group-item-action" id=' + t.skillCode + ">" + a + "</a>") }) } }); $.getJSON(r, function (e, t) { if (t == "success") { $(e).each(function (e, t) { var a = $.trim(t.skillText); $("#lg3").append('<a href="#" class="list-group-item list-group-item-action" id=' + t.skillCode + ">" + a + "</a>") }); setTimeout(UpdateListClick, 100); clearSkillsToLearn(); clearMySkills(); clearSkills(); setAssociate(); setTimeout(update_skillsCounter, 300); setTimeout(readMySavedSkills, 300) } }) } } function readMySavedSkills() { mySkillsSaved = new ArrayList; mySkillsSavedreplica = JSON.parse(window.localStorage.getItem("mySkills")); if (mySkillsSavedreplica) { var e = mySkillsSavedreplica.a.length } else { } for (a = 0; a < e; a++) { mySkillsSaved.add(mySkillsSavedreplica.a[a]) } var t = 0; for (var a = mySkillsSaved.iterator(); a.hasNext();) { var l = a.next(); var i = l.SFIACode; var r = l.htmlText; var s = "<tr id=table_" + i + "><td>" + i + "</td><td>" + r + "</td>"; $("#myTable").append(s); var o = "#req_" + i; $(o).remove(); var n = "#" + i; $(n).addClass("active"); t++ } update_skillsCounter() } function loadProfessions() { if (localhost) { var e = "https://localhost:44381/api/Professions" } else { var e = "https://careerframeworkapi.azurewebsites.net/api/Professions" } try { $.getJSON(e, function (e, t) { if (t == "success") { var a = true; var l = null; var i = null; $(e).each(function (e, t) { if (a) { l = t.professionId; i = t.name; a = false } $("#selProfession").append('<button class="dropdown-item" type="button"' + 'onclick="setProf(' + t.professionId + ",'" + t.name + "'" + ')">' + t.name + "</button>") }); setProf(l, i) } }) } catch (e) { alert(e) } } function UpdateListClick() { $(".list-group-item").click(function () { if ($(this).attr("id") != undefined) { var e = $(this).attr("id") } setTimeout(update_skillsCounter, 100); if ($(this).hasClass("active")) { var t = "#table_" + e; $(t).remove(); var a = "<tr id=req_" + e + "><td>" + e + "</td><td>" + $(this).html() + "</td>"; $("#requiredTable").append(a); var l = mySkillsSaved.size; var i = 0; for (var r = mySkillsSaved.iterator(); r.hasNext();) { var s = r.next(); if (s.SFIACode.valueOf() == e.valueOf()) { mySkillsSaved.remove(s) } else { } i++ } window.localStorage.setItem("mySkills", JSON.stringify(mySkillsSaved)) } else { var o = "<tr id=table_" + e + "><td>" + e + "</td><td>" + $(this).html() + "</td>"; $("#myTable").append(o); var n = "#req_" + e; $(n).remove(); var d = { SFIACode: e, htmlText: $(this).html() }; mySkillsSaved.add(d); window.localStorage.setItem("mySkills", JSON.stringify(mySkillsSaved)) } }) } function getDateString() { var e = new Date; var t = e.getMonth() + 1; if (t < 10) { t = "0" + t } var a = e.getDate(); if (a < 10) { a = "0" + a } return e.getFullYear() + "-" + t + "-" + a } function MakePDF() { var e = table_count("requiredTable"); generatePDF(e * 140, "SkillsToLearnPDF", "SkillsToLearn-" + getDateString() + ".pdf") } function MakePDF2() { var e = table_count("myTable"); generatePDF(e * 140, "MySkillsPDF", "MySkills-" + getDateString() + ".pdf") } function generatePDF(e, t, a) { const l = document.getElementById(t); html2pdf().set({ html2canvas: { scale: 4, height: e, windowWidth: 400 }, filename: a }).from(l).save() }